{"version":3,"sources":["Map/image/new.jpg","Map/image/old.jpg","Map/Map.jsx","Register/Register.jsx","Login/Login.jsx","NavBar/images/logo.jpeg","NavBar/NavBar.jsx","Footer/Footer.jsx","router.jsx","index.js"],"names":["Map","props","openTools","isPositionMode","myMarkerPosition","setMyMarkerPosition","userPosition","setOpenTools","studentId","signature","studentName","setSignature","setMyMapObj","myMapObj","nearbyUserList","OLD_TO_NEW_BY_CAR","NEW_TO_OLD_BY_CAR","OLD_TO_NEW_BY_BUS","NEW_TO_OLD_BY_BUS","useState","isDrive","setIsDrive","panelState","setPanelState","DriveType","setDriveType","route","setRoute","points","setPoints","isLoading","setIsLoading","myMarker","setMyMarker","isMessageBoxShow","setIsMessageBoxShow","recieverId","setReceiverId","isDrivePanelShow","setIsDrivePanelShow","driveRoute","setDriveRoute","friendName","setFriendName","isMessageCallbackShow","setIsMessageCallbackShow","messageCallback","setMessageCallback","message","setMessage","map","mouseTool","newMarker","westMarker","eastMarker","northMarker","newPosition","westPosition","eastPosition","northPosition","initMap","AMap","window","zoom","center","resizeEnable","viewMode","pitch","lang","console","log","on","ev","target","lnglat","pixel","type","lng","lat","Marker","position","title","setLabel","offset","Pixel","content","add","initMarker","plugin","MouseTool","addControl","ToolBar","Scale","OverView","isOpen","MapType","Geolocation","initPlugin","infoNew","getInfoWindow","newJPG","infoOld","oldJPG","newBtn","document","querySelector","westBtn","eastBtn","northBtn","distanceBtn","areaBtn","toolBtn","name","src","address","push","InfoWindow","isCustom","createInfoWindow","join","info","createElement","className","top","titleD","closeX","innerHTML","onclick","closeInfoWindow","appendChild","middle","style","backgroundColor","bottom","margin","sharp","clearInfoWindow","event","addListener","open","getPosition","setCenter","setZoom","setPitch","addEventListener","currentCenter","getCenter","close","rule","measureArea","initEvent","geolocation","enableHighAccuracy","timeout","buttonOffset","zoomToAccuracy","buttonPosition","onComplete","data","pathname","location","curPosMarker","onError","getCurrentPosition","getMapCenter","startDrive","e","innerText","keyword","city","error","getRoute","policy","DrivingPolicy","LEAST_TIME","LEAST_DISTANCE","LEAST_FEE","REAL_TRAFFIC","thisPoints","Driving","search","status","result","routes","addMarker","isUserPosition","remove","a","form","receiver_id","sender_id","React","$qs","stringify","$http","post","res","setTimeout","useEffect","length","getFriendInfoWindow","createFriendInfoWindow","closeFriendInfoWindow","chat","driving","startPosition","endPosition","driveToFriend","MarkerList","focusFlag","focusPos","item","longitude","latitude","username","toUserId","student_id","setFocus","setFitView","getFriendMarkers","onClick","placeholder","onChange","value","reload","distance","steps","index","instruction","disabled","indexOf","Math","floor","time","color","fontSize","htmlFor","marginLeft","height","width","id","Register","setStudentId","setStudentName","studentPassword","setStudentPassword","studentPasswordRepeat","setStudentPasswordRepeat","isIdChecked","setIsIdChecked","idMessage","setIdMessage","isIdMessageShow","setIsIdMessageShow","isPasswordChecked","setIsPasswordChecked","passwordMessage","setPasswordMessage","isPasswordMessageShow","setIsPasswordMessageShow","isAfterRegister","setIsAfterRegister","registerMessage","setRegisterMessage","password","code","query","get","params","autoFocus","onBlur","checkStudentId","handleRegister","Login","isAfterLogin","setIsAfterLogin","loginMessage","setLoginMessage","localStorage","setItem","token","handleLogin","NavBar","setIsPositionMode","setIsGamMode","isGamMode","setNearbyUserList","setUserPosition","isMap","isPhone","setIsPhone","isLogin","setIsLogin","isMore","setIsMore","isPanelShow","setIsPanelShow","panelMessage","setPanelMessage","myMessageList","setMyMessageList","getMyMessage","messageList","message_list","reverse","getToken","then","with_token","student_name","isRedirect","user_lng","user_lat","user_list","body","clientWidth","handleLogout","removeItem","handleChangePosition","flag","getFriendInfo","friend_id","userinfo","newList","SenderId","SenderName","Message","SendTime","LOGO","Footer","Component","router","path","component","render","axios","qs","defaults","baseURL","interceptors","request","use","config","getItem","headers","Authorization","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.ea826ec1.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/new.72b9073d.jpg\";","export default __webpack_public_path__ + \"static/media/old.9da2bba9.jpg\";","import React, { useEffect, useState } from 'react';\nimport './Map.scss'\nimport newJPG from './image/new.jpg'\nimport oldJPG from './image/old.jpg'\n\n\nfunction Map(props) {\n  const {\n    openTools,\n    isPositionMode,\n    myMarkerPosition,\n    setMyMarkerPosition,\n    setOpenTools,\n    userPosition,\n    studentId,\n    studentName,\n    signature,\n    setSignature,\n    setMyMapObj,\n    myMapObj,\n    nearbyUserList } = props\n\n  const OLD_TO_NEW_BY_CAR = \"老校区至新校区:驾车🚗\"\n  const NEW_TO_OLD_BY_CAR = \"新校区至老校区:驾车🚗\"\n  const OLD_TO_NEW_BY_BUS = \"老校区至新校区:公交🚌\"\n  const NEW_TO_OLD_BY_BUS = \"新校区至老校区:公交🚌\"\n\n  const [isDrive, setIsDrive] = useState(false)\n  // 面板状态 \n  //0----选择出行方式 \n  //1----选择路线\n  //2----导航展示\n  const [panelState, setPanelState] = useState(0)\n  const [DriveType, setDriveType] = useState(OLD_TO_NEW_BY_CAR)\n  const [route, setRoute] = useState([])\n  const [points, setPoints] = useState([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [myMarker, setMyMarker] = useState(null)\n  const [isMessageBoxShow, setIsMessageBoxShow] = useState(false)\n  const [recieverId, setReceiverId] = useState(\"\")\n  const [isDrivePanelShow, setIsDrivePanelShow] = useState(false)\n  const [driveRoute, setDriveRoute] = useState([])//导航去找朋友\n  const [friendName, setFriendName] = useState(\"\")\n  const [isMessageCallbackShow, setIsMessageCallbackShow] = useState(false)\n  const [messageCallback, setMessageCallback] = useState(\"\")\n\n  const [message, setMessage] = useState(\"\")\n\n  let map = null\n  let mouseTool = null\n  let newMarker = null\n  let westMarker = null\n  let eastMarker = null\n  let northMarker = null\n\n  const newPosition = [114.61617672935125, 30.45759461941093]\n  const westPosition = [114.39835417717694, 30.520580596379155]\n  const eastPosition = [114.40520669549704, 30.519101428977407]\n  const northPosition = [114.3994557698071, 30.528924839045622]\n\n  useEffect(() => {\n    initMap()\n    const h1 = document.querySelector('.welcome')\n    const author = document.querySelector('.author')\n    const colorList = [\"red\", \"green\", \"yellow\", \"cyan\", \"hotpink\"]\n    let i = 0\n  }, [])\n  function initMap() {\n    const AMap = window.AMap\n\n    map = new AMap.Map('container', {\n      zoom: 14, //缩放级别\n      center: [114.61617672935125, 30.45759461941093],\n      resizeEnable: true,\n      // layers: [new AMap.TileLayer.Satellite()],  //设置图层,可设置成包含一个或多个图层的数组\n      // mapStyle: 'amap://styles/whitesmoke',  //设置地图的显示样式\n      viewMode: '3D',  //设置地图模式\n      pitch: 0,//地图仰角设定\n      lang: 'zh_cn',  //设置地图语言类型\n    });\n    console.log(\"click\");\n\n    map.on('click', function (ev) {\n      // 触发事件的对象\n      var target = ev.target;\n      // 触发事件的地理坐标，AMap.LngLat 类型\n      var lnglat = ev.lnglat;\n      console.log(\"lnglat=\", lnglat);\n      // 触发事件的像素坐标，AMap.Pixel 类型\n      var pixel = ev.pixel;\n      // 触发事件类型\n      var type = ev.type;\n      setMyMarkerPosition([lnglat.lng, lnglat.lat])\n    });\n    initMarker()\n    initPlugin()\n    initEvent()\n    getMapCenter()\n    setPanelState(0)\n    setMyMapObj(map)\n  }\n\n  function initMarker() {\n    const AMap = window.AMap\n    newMarker = new AMap.Marker({\n      position: newPosition,\n      title: '新校区',\n      map: map,\n      // content:'<div class=\"marker-route marker-marker-bus-from\">新</div>'\n    });\n    newMarker.setLabel({\n      offset: new AMap.Pixel(-13, -24),\n      content: \"新校区\"\n    });\n    westMarker = new AMap.Marker({\n      position: westPosition,\n      map: map,\n      title: '西校区'\n    });\n    westMarker.setLabel({\n      offset: new AMap.Pixel(-13, -24),\n      content: \"西校区\"\n    });\n    eastMarker = new AMap.Marker({\n      position: eastPosition,\n      map: map,\n      title: '东校区'\n    });\n    eastMarker.setLabel({\n      offset: new AMap.Pixel(-13, -24),\n      content: \"东校区\"\n    });\n    northMarker = new AMap.Marker({\n      position: northPosition,\n      map: map,\n      title: '北校区'\n    });\n    northMarker.setLabel({\n      offset: new AMap.Pixel(-13, -24),\n      content: \"北校区\"\n    });\n    map.add([newMarker, westMarker, northMarker, eastMarker]);\n    // map.setFitView();\n  }\n  function initEvent() {\n    console.log(\"initEvent\");\n\n    const AMap = window.AMap\n    let infoNew = getInfoWindow(\"未来城校区\", newJPG, \"湖北省武汉市东湖新技术开发区锦程街68号\")\n    let infoOld = getInfoWindow(\"南望山校区\", oldJPG, \"湖北省武汉市鲁磨路388号\")\n    const newBtn = document.querySelector('.new')\n    const westBtn = document.querySelector('.west')\n    const eastBtn = document.querySelector('.east')\n    const northBtn = document.querySelector('.north')\n    const distanceBtn = document.querySelector('.distance')\n    const areaBtn = document.querySelector('.area')\n    const toolBtn = document.querySelector('.tool')\n    AMap.event.addListener(newMarker, 'click', function () {\n      console.log(\"here\");\n      infoNew.open(map, newMarker.getPosition());\n      map.setCenter(newPosition);\n      map.setZoom(18)\n      map.setPitch(60)\n    });\n    AMap.event.addListener(westMarker, 'click', function () {\n      infoOld.open(map, westMarker.getPosition());\n      map.setCenter(westPosition);\n      map.setZoom(18)\n      map.setPitch(60)\n    });\n    AMap.event.addListener(eastMarker, 'click', function () {\n      infoOld.open(map, eastMarker.getPosition());\n      map.setCenter(eastPosition);\n      map.setZoom(18)\n      map.setPitch(60)\n    });\n    AMap.event.addListener(northMarker, 'click', function () {\n      infoOld.open(map, northMarker.getPosition());\n      map.setCenter(northPosition);\n      map.setZoom(18)\n      map.setPitch(60)\n    });\n    newBtn.addEventListener('click', () => {\n      // 传入经纬度，设置地图中心点\n      // let newPosition = new AMap.LngLat(114.617863, 39.915085);  // 标准写法\n      // 简写 let position = [116, 39]; \n      map.setCenter(newPosition);\n      map.setZoom(18)\n      map.setPitch(60)\n      // // 获取地图中心点\n      let currentCenter = map.getCenter();\n      console.log(\"currentCenter=\", currentCenter);\n    })\n    westBtn.addEventListener('click', () => {\n      map.setCenter(westPosition);\n      map.setZoom(18)\n      map.setPitch(60)\n      let currentCenter = map.getCenter();\n      console.log(\"currentCenter=\", currentCenter);\n    })\n    eastBtn.addEventListener('click', () => {\n      map.setCenter(eastPosition);\n      map.setZoom(18)\n      map.setPitch(60)\n      let currentCenter = map.getCenter();\n      console.log(\"currentCenter=\", currentCenter);\n    })\n    northBtn.addEventListener('click', () => {\n      map.setCenter(northPosition);\n      map.setZoom(18)\n      map.setPitch(60)\n      let currentCenter = map.getCenter();\n      console.log(\"currentCenter=\", currentCenter);\n    })\n    distanceBtn.addEventListener('click', () => {\n      mouseTool.close(true)\n      mouseTool.rule();\n    })\n    areaBtn.addEventListener('click', () => {\n      mouseTool.close(true)\n      mouseTool.measureArea();\n    })\n    toolBtn.addEventListener('click', () => {\n      mouseTool.close(true)\n    })\n\n    function getInfoWindow(name, src, address) {\n      var title = `中国地质大学${name}`,\n        content = [];\n      content.push(\"<img style=\" + \"width:120px;height:80px\" + ` src='${src}' >地址：${address}`);\n      content.push(\"校友工作服务电话：027-67883684\");\n      content.push(\"<a href='http://www.cug.edu.cn/'>官方网站</a>\");\n      var infoWindow = new AMap.InfoWindow({\n        isCustom: true,  //使用自定义窗体\n        content: createInfoWindow(title, content.join(\"<br/>\")),\n        offset: new AMap.Pixel(16, -45)\n      });\n      return infoWindow\n    }\n\n    //构建自定义信息窗体\n    function createInfoWindow(title, content) {\n      var info = document.createElement(\"div\");\n      info.className = \"custom-info input-card content-window-card\";\n\n      //可以通过下面的方式修改自定义窗体的宽高\n      // info.style.width = \"400px\";\n      // 定义顶部标题\n      var top = document.createElement(\"div\");\n      var titleD = document.createElement(\"div\");\n      var closeX = document.createElement(\"img\");\n      top.className = \"info-top\";\n      titleD.innerHTML = title;\n      closeX.src = \"https://webapi.amap.com/images/close2.gif\";\n      closeX.onclick = closeInfoWindow;\n\n      top.appendChild(titleD);\n      top.appendChild(closeX);\n      info.appendChild(top);\n\n      // 定义中部内容\n      var middle = document.createElement(\"div\");\n      middle.className = \"info-middle\";\n      middle.style.backgroundColor = 'white';\n      middle.innerHTML = content;\n      info.appendChild(middle);\n\n      // 定义底部内容\n      var bottom = document.createElement(\"div\");\n      bottom.className = \"info-bottom\";\n      bottom.style.position = 'relative';\n      bottom.style.top = '0px';\n      bottom.style.margin = '0 auto';\n      var sharp = document.createElement(\"img\");\n      sharp.src = \"https://webapi.amap.com/images/sharp.png\";\n      bottom.appendChild(sharp);\n      info.appendChild(bottom);\n      return info;\n    }\n\n    //关闭信息窗体\n    function closeInfoWindow() {\n      map.clearInfoWindow();\n    }\n  }\n  function initPlugin() {\n    const AMap = window.AMap\n    map.plugin([\"AMap.MouseTool\"], function () {\n      mouseTool = new AMap.MouseTool(map);\n    });\n    AMap.plugin([\n      'AMap.ToolBar',\n      'AMap.Scale',\n      'AMap.OverView',\n      'AMap.MapType',\n      'AMap.Geolocation',\n      'AMap.Driving'\n    ], function () {\n      // 在图面添加工具条控件，工具条控件集成了缩放、平移、定位等功能按钮在内的组合控件\n      map.addControl(new AMap.ToolBar());\n      // 在图面添加比例尺控件，展示地图在当前层级和纬度下的比例尺\n      map.addControl(new AMap.Scale());\n      // 在图面添加鹰眼控件，在地图右下角显示地图的缩略图\n      map.addControl(new AMap.OverView({ isOpen: true }));\n      // 在图面添加类别切换控件，实现默认图层与卫星图、实施交通图层之间切换的控制\n      map.addControl(new AMap.MapType());\n      // 在图面添加定位控件，用来获取和展示用户主机所在的经纬度位置\n      map.addControl(new AMap.Geolocation());\n    });\n    // AMap.plugin('AMap.Autocomplete', function () {\n    //   // 实例化Autocomplete\n    //   var autoOptions = {\n    //     //city 限定城市，默认全国\n    //     city: '全国'\n    //   }\n    //   var autoComplete = new AMap.Autocomplete(autoOptions);\n    //   autoComplete.search(keyword, function (status, result) {\n    //     // 搜索成功时，result即是对应的匹配数据\n    //   })\n    // })\n  }\n  function getMapCenter() {\n\n    const AMap = window.AMap\n    AMap.plugin('AMap.Geolocation', function () {\n      var geolocation = new AMap.Geolocation({\n        // 是否使用高精度定位，默认：true\n        enableHighAccuracy: true,\n        // 设置定位超时时间，默认：无穷大\n        timeout: 10000,\n        // 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)\n        buttonOffset: new AMap.Pixel(10, 20),\n        //  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false\n        zoomToAccuracy: true,\n        //  定位按钮的排放位置,  RB表示右下\n        buttonPosition: 'RB'\n      })\n\n      geolocation.getCurrentPosition()\n      AMap.event.addListener(geolocation, 'complete', onComplete)\n      AMap.event.addListener(geolocation, 'error', onError)\n\n      function onComplete(data) {\n        console.log(data.position);\n        const lat = data.position.lat\n        const lng = data.position.lng\n        const pathname = window.location.pathname\n\n        if (pathname !== \"/position\") {\n          map.setCenter([lng, lat])\n          const curPosMarker = new AMap.Marker({\n            position: [lng, lat],\n            title: '我的定位',\n            map: map,\n            // content:'<div class=\"marker-route marker-marker-bus-from\">新</div>'\n          });\n          curPosMarker.setLabel({\n            offset: new AMap.Pixel(-18, -24),\n            content: \"我的定位\"\n          });\n          map.add(curPosMarker)\n        }\n        if (userPosition[0] === 0 && userPosition[1] === 0 && pathname === '/position') {\n          setMyMarkerPosition([lng, lat])\n          map.setCenter([lng, lat])\n          const curPosMarker = new AMap.Marker({\n            position: [lng, lat],\n            title: '我的定位',\n            map: map,\n            // content:'<div class=\"marker-route marker-marker-bus-from\">新</div>'\n          });\n          curPosMarker.setLabel({\n            offset: new AMap.Pixel(-18, -24),\n            content: \"我的定位\"\n          });\n          map.add(curPosMarker)\n          \n        }\n      }\n\n      function onError(data) {\n        // 定位出错\n      }\n    })\n  }\n  function startDrive(e) {\n    switch (e.target.innerText) {\n      case \"新校区至老校区:驾车🚗\":\n        setDriveType(NEW_TO_OLD_BY_CAR)\n        setPanelState(1)\n        setPoints([\n          { keyword: '中国地质大学未来城校区', city: '武汉' },\n          { keyword: '中国地质大学西区(西2门)', city: '武汉' }\n        ])\n        break;\n      case \"老校区至新校区:驾车🚗\":\n        setDriveType(OLD_TO_NEW_BY_CAR)\n        setPanelState(1)\n        setPoints([\n          { keyword: '中国地质大学西区(西2门)', city: '武汉' },\n          { keyword: '中国地质大学未来城校区', city: '武汉' },\n        ])\n        break;\n      case \"新校区至老校区:公交🚌\":\n        setDriveType(OLD_TO_NEW_BY_BUS)\n        setPanelState(1)\n        setPoints([\n          { keyword: '中国地质大学未来城校区', city: '武汉' },\n          { keyword: '中国地质大学西区(西2门)', city: '武汉' }\n        ])\n        break;\n      case \"老校区至新校区:公交🚌\":\n        setDriveType(NEW_TO_OLD_BY_BUS)\n        setPanelState(1)\n        setPoints([\n          { keyword: '中国地质大学西区(西2门)', city: '武汉' },\n          { keyword: '中国地质大学未来城校区', city: '武汉' },\n        ])\n        break;\n      default:\n        console.error(\"出错了！\")\n        break;\n    }\n\n  }\n  function getRoute(e) {\n    setIsLoading(true)\n    const AMap = window.AMap\n    let policy = null\n    // policy: AMap.DrivingPolicy.LEAST_TIME,//最短时间\n    // policy: AMap.DrivingPolicy.LEAST_FEE,//最少费用\n    // policy: AMap.DrivingPolicy.LEAST_DISTANCE,//最短距离\n    // policy: AMap.DrivingPolicy.REAL_TRAFFIC,//实际交通考量\n    if (DriveType == OLD_TO_NEW_BY_CAR || DriveType == NEW_TO_OLD_BY_CAR) {\n      switch (e.target.innerText) {\n        case \"时间最短⏰\":\n          policy = AMap.DrivingPolicy.LEAST_TIME\n          console.log(\"here\");\n          break;\n        case \"路程最短🛣️\":\n          policy = AMap.DrivingPolicy.LEAST_DISTANCE\n          break;\n        case \"费用最少💰\":\n          policy = AMap.DrivingPolicy.LEAST_FEE\n          break;\n        case \"系统推荐路线👍\":\n          policy = AMap.DrivingPolicy.REAL_TRAFFIC\n          break;\n        default:\n          console.error(\"出错了！\")\n          break;\n      }\n      let thisPoints = [...points]\n      map = new AMap.Map(\"container\", {\n        zoom: 15, //缩放级别\n        center: [114.61617672935125, 30.45759461941093],\n        resizeEnable: true,\n      });\n      //构造路线导航类\n      var driving = new AMap.Driving({\n        map: map,\n        policy,\n      });\n      // 根据起终点名称规划驾车导航路线\n      driving.search(thisPoints, function (status, result) {\n        // result 即是对应的驾车导航信息，相关数据结构文档请参考  https://lbs.amap.com/api/javascript-api/reference/route-search#m_DrivingResult\n        if (status === 'complete') {\n          console.log('绘制驾车路线完成')\n          setRoute(result.routes)\n          console.log(result);\n        } else {\n          console.error('获取驾车数据失败：' + result)\n        }\n        setIsLoading(false)\n        setPanelState(2)\n      });\n\n    } else if (DriveType == NEW_TO_OLD_BY_BUS || DriveType == OLD_TO_NEW_BY_BUS) {\n      // switch (e.target.innerText) {\n      //   case \"时间最短⏰\":\n      //     policy = AMap.TransferPolicy.LEAST_TIME\n      //     console.log(\"here\");\n      //     break;\n      //   case \"费用最少💰\":\n      //     policy = AMap.TransferPolicy.LEAST_FEE\n      //     break;\n      //   case \"换乘次数最少\":\n      //     policy = AMap.TransferPolicy.LEAST_TRANSFER\n      //     break;\n      //   case \"走路距离最少🚶‍♀️\":\n      //     policy = AMap.TransferPolicy.LEAST_WALK\n      //     break;\n      //   case \"不坐地铁🚇\":\n      //     policy = AMap.TransferPolicy.NO_SUBWAY\n      //     break;\n      //   case \"系统推荐路线👍\":\n      //     policy = AMap.TransferPolicy.MOST_COMFORT\n      //     break;\n      //   default:\n      //     console.error(\"出错了！\")\n      //     break;\n      // }\n      let thisPoints = [...points]\n      map = new AMap.Map(\"container\", {\n        zoom: 14, //缩放级别\n        center: [114.61617672935125, 30.45759461941093],\n        resizeEnable: true,\n      });\n      console.log(\"transfer\");\n\n      //构造路线导航类\n      var transfer = new AMap.Driving({\n        map: map,\n        // policy,\n      });\n      // 根据起终点名称规划驾车导航路线\n      transfer.search(thisPoints, function (status, result) {\n        // result 即是对应的驾车导航信息，相关数据结构文档请参考  https://lbs.amap.com/api/javascript-api/reference/route-search#m_DrivingResult\n        if (status === 'complete') {\n          console.log('绘制出行路线完成')\n          setRoute(result.routes)\n          console.log(result);\n        } else {\n          console.error('获取出行数据失败：' + result)\n        }\n        setIsLoading(false)\n        setPanelState(2)\n      });\n    } else {\n      console.error(\"setPolicyError\")\n    }\n  }\n  function driveToFriend(position) {\n    setIsMessageBoxShow(false)\n    const AMap = window.AMap\n    map = new AMap.Map(\"container\", {\n      zoom: 15, //缩放级别\n      center: userPosition,\n      resizeEnable: true,\n    });\n    //构造路线导航类\n    var driving = new AMap.Driving({\n      map: map,\n      policy: AMap.DrivingPolicy.REAL_TRAFFIC,\n    });\n    // 根据起终点名称规划驾车导航路线\n    let startPosition = [...userPosition]\n    let endPosition = [...position]\n    setIsLoading(true)\n    driving.search(startPosition, endPosition, function (status, result) {\n      console.log(\"end\");\n\n      // result 即是对应的驾车导航信息，相关数据结构文档请参考  https://lbs.amap.com/api/javascript-api/reference/route-search#m_DrivingResult\n      if (status === 'complete') {\n        console.log('绘制驾车路线完成')\n        console.log(\"result.routes[0]\", result.routes[0]);\n\n        setIsDrivePanelShow(true)\n        setDriveRoute(result.routes[0])\n        console.log(result);\n      } else {\n        console.error('获取驾车数据失败：' + result)\n      }\n      setIsLoading(false)\n\n    });\n  }\n  function panelRouter() {\n    if (panelState === 0) {\n      return (<>\n        <div className=\"drive-type\">请选择出行方向及方式</div>\n        <div className=\"drive-button-list1\">\n          <button className=\"drive-button\" onClick={e => { startDrive(e) }}>新校区至老校区:驾车🚗</button>\n          <button className=\"drive-button\" onClick={e => { startDrive(e) }}>老校区至新校区:驾车🚗</button>\n        </div>\n        <div className=\"drive-button-list2\">\n          <button className=\"drive-button\" onClick={e => { startDrive(e) }} disabled>新校区至老校区:公交🚌</button>\n          <button className=\"drive-button\" onClick={e => { startDrive(e) }} disabled>老校区至新校区:公交🚌</button>\n        </div>\n      </>)\n    } else if (panelState === 1) {\n      return (\n        <>\n          <div className=\"drive-type\">你选择的方式是{DriveType} \b</div>\n          <div className=\"drive-type\">请选择出行策略:\b</div>\n          {DriveType.indexOf(\"驾车\") !== -1 ?\n            <>\n              <div className=\"drive-button-list1\">\n                <button className=\"drive-button\" onClick={e => { getRoute(e) }}>时间最短⏰</button>\n                <button className=\"drive-button\" onClick={e => { getRoute(e) }}>路程最短🛣️</button>\n              </div>\n              <div className=\"drive-button-list2\">\n                <button className=\"drive-button\" onClick={e => { getRoute(e) }}>费用最少💰</button>\n                <button className=\"drive-button suggest\" onClick={e => { getRoute(e) }}>系统推荐路线👍</button>\n              </div>\n            </> :\n            <>\n              <div className=\"drive-button-list1\">\n                <button className=\"drive-button\" onClick={e => { getRoute(e) }}>时间最短⏰</button>\n                <button className=\"drive-button\" onClick={e => { getRoute(e) }}>换乘次数最少</button>\n              </div>\n              <div className=\"drive-button-list2\">\n                <button className=\"drive-button\" onClick={e => { getRoute(e) }}>费用最少💰</button>\n                <button className=\"drive-button\" onClick={e => { getRoute(e) }}>不坐地铁🚇</button>\n              </div>\n              <div className=\"drive-button-list3\">\n                <button className=\"drive-button\" onClick={e => { getRoute(e) }}>走路距离最少🚶‍♀️</button>\n                <button className=\"drive-button suggest\" onClick={e => { getRoute(e) }}>系统推荐路线👍</button>\n              </div>\n            </>}\n        </>\n      )\n    } else if (panelState === 2) {\n      return (<>\n        <div className=\"drive-type\">{route[0].policy}路线,耗时约{Math.floor((route[0].time) / 60)}分钟,路线总长{route[0].distance}米</div>\n        <div className=\"instruction-container\">\n          {route[0].steps.map((item, index) => {\n            return (\n              <div className=\"drive-path\" key={item.instruction}>{index + 1}:{item.instruction}</div>\n            )\n          })}\n        </div>\n\n      </>\n\n      )\n    }\n  }\n  function addMarker(isUserPosition = false) {\n    console.log(\"userPosition\", userPosition);\n    myMarker && myMapObj.remove(myMarker)\n    const AMap = window.AMap\n    const Marker = new AMap.Marker({\n      position: isUserPosition ? userPosition : myMarkerPosition,\n      map: myMapObj,\n    });\n    // Marker.setTitle(\"设置位置\");\n    Marker.setLabel({\n      offset: new AMap.Pixel(15, 15),\n      content: \"<span style='color:red;font-weight:600;text-align:center;'>我的位置</span>\"\n    });\n    setMyMarker(Marker)\n  }\n  useEffect(() => {\n    myMarker && myMapObj.add(myMarker)\n  }, [myMarker])\n  useEffect(() => {\n    if (nearbyUserList && nearbyUserList.length > 0) {\n      const center = [114, 30]\n      const AMap = window.AMap\n      map = new AMap.Map('container', {\n        zoom: 15, //缩放级别\n        center: userPosition,\n        resizeEnable: true,\n        // layers: [new AMap.TileLayer.Satellite()],  //设置图层,可设置成包含一个或多个图层的数组\n        // mapStyle: 'amap://styles/whitesmoke',  //设置地图的显示样式\n        viewMode: '3D',  //设置地图模式\n        pitch: 0,//地图仰角设定\n        lang: 'zh_cn',  //设置地图语言类型\n      });\n      console.log(\"click\");\n      const Marker = new AMap.Marker({\n        position: userPosition,\n        map: map,\n      });\n      Marker.setLabel({\n        offset: new AMap.Pixel(15, 15),\n        content: \"<span style='color:red;font-weight:600;text-align:center;'>我的位置</span>\"\n      });\n      setMyMarker(Marker)\n      setMyMapObj(map)\n      getFriendMarkers(nearbyUserList)\n    }\n  }, [nearbyUserList, userPosition])\n  useEffect(() => {\n    if (isPositionMode && userPosition[0] != 0) {\n      myMapObj.setCenter(userPosition)\n      addMarker(true)\n    } else if (userPosition[0] != 0 && userPosition[1] != 0) {\n      myMapObj.setCenter(userPosition)\n\n    }\n  }, [isPositionMode, userPosition])\n  function getFriendMarkers(nearbyUserList) {\n    function getFriendInfoWindow(name, signature, position) {\n      var title = name + \"\",\n        content = [];\n      content.push(signature);\n      var infoWindow = new AMap.InfoWindow({\n        isCustom: true,  //使用自定义窗体\n        content: createFriendInfoWindow(title, content.join(\"<br/>\"), position),\n        offset: new AMap.Pixel(16, -45)\n      });\n      return infoWindow\n    }\n\n    //构建自定义信息窗体\n    function createFriendInfoWindow(title, content, position) {\n      var info = document.createElement(\"div\");\n      info.className = \"custom-info input-card content-window-card\";\n\n      //可以通过下面的方式修改自定义窗体的宽高\n      // info.style.width = \"400px\";\n      // 定义顶部标题\n      var top = document.createElement(\"div\");\n      var titleD = document.createElement(\"div\");\n      var closeX = document.createElement(\"img\");\n      top.className = \"info-top\";\n      titleD.innerHTML = title + \"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\";\n      closeX.src = \"https://webapi.amap.com/images/close2.gif\";\n      closeX.onclick = closeFriendInfoWindow;\n\n      top.appendChild(titleD);\n      top.appendChild(closeX);\n      info.appendChild(top);\n\n      // 定义中部内容\n      var middle = document.createElement(\"div\");\n      middle.className = \"info-middle\";\n      middle.style.backgroundColor = 'white';\n      middle.innerHTML = \"<span style='color:red'>个性签名:</span>\" + content;\n      var chat = document.createElement(\"span\");\n      chat.className = \"friend-chat\";\n      chat.innerText = \"导航去找Ta\"\n      chat.onclick = () => {\n        driveToFriend(position)\n        setFriendName(title)\n      }\n      middle.appendChild(chat)\n      info.appendChild(middle);\n\n\n      // 定义底部内容\n      var bottom = document.createElement(\"div\");\n      bottom.className = \"info-bottom\";\n      bottom.style.position = 'relative';\n      bottom.style.top = '0px';\n      bottom.style.margin = '0 auto';\n      var sharp = document.createElement(\"img\");\n      sharp.src = \"https://webapi.amap.com/images/sharp.png\";\n      bottom.appendChild(sharp);\n      info.appendChild(bottom);\n      return info;\n    }\n\n    //关闭信息窗体\n    function closeFriendInfoWindow() {\n      setIsMessageBoxShow(false)\n      map.clearInfoWindow();\n    }\n    const MarkerList = []\n    const AMap = window.AMap\n    let focusFlag = false\n    let focusPos = [0, 0]\n    nearbyUserList.map(item => {\n      const lng = item.longitude\n      const lat = item.latitude\n      const Marker = new AMap.Marker({\n        position: [lng, lat],\n        map: map,\n      });\n      Marker.setLabel({\n        offset: new AMap.Pixel(15, 15),\n        content: `<span style='color:red;font-weight:600;text-align:center;'>${item.username}的位置</span>`\n      });\n      AMap.event.addListener(Marker, 'click', function () {\n        console.log(\"here\");\n        let infoNew = getFriendInfoWindow(item.username, item.signature, [lng, lat])\n        infoNew.open(map, Marker.getPosition());\n        map.setCenter([lng, lat]);\n        map.setZoom(18)\n        map.setPitch(60)\n        leaveMessage(item.student_id)\n      });\n      MarkerList.push(Marker)\n      if (item.setFocus) {\n        focusFlag = true\n        focusPos = [lng, lat]\n        item.setFocus = false\n      }\n    })\n    map.add(MarkerList)\n    if (focusFlag) {\n      map.setCenter(focusPos)\n      map.setZoom(18)\n      map.setPitch(60)\n    } else {\n      map.setFitView(); //自适应\n    }\n  }\n  function leaveMessage(toUserId) {\n    setIsMessageBoxShow(true)\n    setReceiverId(toUserId)\n  }\n  async function sendMessage() {\n    const form = {\n      receiver_id: recieverId,\n      message: message,\n      sender_id: studentId,\n    }\n    const data = React.$qs.stringify(form)\n    const res = await React.$http.post(\"/message/leave\", data)\n    console.log(res);\n    setMessageCallback(res.data.message)\n    setIsMessageCallbackShow(true)\n    setTimeout(() => {\n      setMessageCallback(\"\")\n      setIsMessageCallbackShow(false)\n    }, 3000)\n  }\n  return (\n    <div className=\"map-container\" onClick={() => {\n      isPositionMode && addMarker()\n    }}>\n      {isMessageBoxShow && <div className=\"message-box\">\n\n        {isMessageCallbackShow ? (\n          <div className=\"message-box-title\">\n            {messageCallback}\n          </div>)\n          : (<>\n            <div className=\"message-box-title\">你想对Ta说什么？(最多200字)</div>\n            <input type=\"text\" className=\"message-box-intput\" placeholder=\"校友竟在我身边\"\n              onChange={event => {\n                setMessage(event.target.value)\n              }} />\n            <button className=\"message-box-btn\" onClick={sendMessage}>提 交</button>\n          </>)\n        }\n\n\n      </div>}\n      {isDrivePanelShow && <div className=\"drive-friend-panel\">\n        <div className=\"drive-friend-close\" onClick={() => {\n          location.reload()\n        }}>❌</div>\n        <div className=\"drive-friend-panel-title\">正在去找{friendName},距Ta约{driveRoute.distance / 1000}千米</div>\n        {driveRoute.steps && driveRoute.steps.map((item, index) => {\n          return <div className=\"drive-friend-instruction\" key={item.instruction}>{index}:{item.instruction}</div>\n        })}\n      </div>}\n      {isLoading && <div className=\"loading\">路径计算中...</div>}\n      {openTools && <div className=\"box\">\n        {isDrive && <div className=\"drive-panel\">\n          <div className=\"panel-title\">导航面板\n            <span className=\"panel-close\" onClick={() => {\n              setIsDrive(false)\n              initMap()\n            }}>❌</span>\n            {panelState > 0 && <span className=\"panel-prev\" onClick={() => {\n              setPanelState(panelState - 1)\n            }}>{\"<\"}</span>}\n\n          </div>\n          {panelRouter()}\n        </div>}\n        {/* <h2 className=\"welcome\">🌺欢迎各位老师参加毕业答辩🌺</h2> */}\n\n        <div className=\"module-box\">\n          <button className=\"new\">新校区</button>\n          <button className=\"west\">西校区</button>\n          <button className=\"east\">东校区</button>\n          <button className=\"north\">北校区</button>\n        </div>\n        <div className=\"tool-box\">\n          <button className=\"distance\">距离测量</button>\n          <button className=\"area\">面积测量</button>\n          <button className=\"drive\" onClick={() => { setIsDrive(true) }}>校区导航</button>\n          <button className=\"tool\">关闭工具</button>\n        </div>\n        <div className=\"info\"></div>\n      </div>}\n      {isPositionMode && <div className=\"position-box\">\n        <div className=\"position-mode-title\">\n          <span style={{ color: \"red\", fontSize: 23 }}>\n            请点击地图选择你的位置\n          </span>\n        </div>\n        <div className=\"position-mode-title\">\n          你目前的位置是\n        </div>\n        <div className=\"position-mode-title\">\n          经度\n          <span style={{ color: \"red\", fontSize: 23 }}>\n            {myMarkerPosition[0] === 0 ? userPosition[0] : myMarkerPosition[0]}\n          </span>\n        </div><div className=\"position-mode-title\">\n          纬度\n          <span style={{ color: \"red\", fontSize: 23 }}>\n            {myMarkerPosition[1] === 0 ? userPosition[1] : myMarkerPosition[1]}\n          </span>\n        </div>\n        <div className=\"position-mode-title\">更改个性签名(可不填 最多50字)</div>\n        <div className=\"position-mode-title\">\n          <label htmlFor=\"signature\">个性签名:</label>\n          <input style={{ marginLeft: 20, height: 20, width: 150, fontSize: 18 }} placeholder=\"快来更改你的个性签名吧！\" type=\"text\" id=\"signature\" value={signature}\n            onChange={event => {\n              setSignature(event.target.value)\n            }} /></div>\n      </div>}\n      <div id=\"container\"></div>\n      <div className=\"author-box\">\n        <div className=\"author\">朱宇宸©️CUGMap</div>\n      </div>\n    </div>\n  );\n\n}\n\n\n\nexport default Map;\n","import React, { Component, useState } from 'react';\nimport './Register.scss'\n\nfunction Register() {\n    const [studentId, setStudentId] = useState('')\n    const [studentName, setStudentName] = useState('')\n    const [studentPassword, setStudentPassword] = useState('')\n    const [studentPasswordRepeat, setStudentPasswordRepeat] = useState('')\n\n    const [isIdChecked, setIsIdChecked] = useState(false)\n    const [idMessage, setIdMessage] = useState(\"该学号可以使用👍\")\n    const [isIdMessageShow, setIsIdMessageShow] = useState(false)\n\n    const [isPasswordChecked, setIsPasswordChecked] = useState(false)\n    const [passwordMessage, setPasswordMessage] = useState(\"你的密码很棒👍\")\n    const [isPasswordMessageShow, setIsPasswordMessageShow] = useState(false)\n    const [isAfterRegister, setIsAfterRegister] = useState(false)\n    const [registerMessage, setRegisterMessage] = useState('')\n    async function handleRegister() {\n        const form = {\n            student_id: studentId,\n            username: studentName,\n            password: studentPassword,\n        }\n        const data = React.$qs.stringify(form)\n        const res = await React.$http.post(\"/user/register\", data)\n        setRegisterMessage(res.data.message)\n        if (res.data.code === 1) {\n            setIsAfterRegister(true)\n            setRegisterMessage(res.data.message + \"，即将跳转登陆页面\")\n            setTimeout(() => {\n                window.location = \"/login\"\n            }, 3000)\n        } else {\n            setIsAfterRegister(true)\n            setRegisterMessage(res.data.message + \"，请重新注册\")\n            setTimeout(() => {\n                setIsAfterRegister(false)\n            }, 3000)\n        }\n    }\n    async function checkStudentId() {\n        const query = {\n            student_id: studentId\n        }\n        const res = await React.$http.get(\"/user/check\", {\n            params: query\n        })\n        if (res.data.code === 1) {\n            setIsIdChecked(true)\n            setIdMessage(\"该学号可以使用👍\")\n        } else {\n            setIsIdChecked(false)\n            setIdMessage(\"❌\" + res.data.message)\n        }\n    }\n    function checkPassword(value) {\n        if (value.length < 8 || value.length > 20) {\n            setIsPasswordChecked(false)\n            setPasswordMessage(\"你的密码长度不对❌\")\n        }\n        else if (value === studentPasswordRepeat) {\n            setIsPasswordChecked(true)\n            setPasswordMessage(\"你的密码很棒👍\")\n        } else {\n            setIsPasswordChecked(false)\n            setPasswordMessage(\"两次密码不相同❌\")\n        }\n    }\n    function checkPasswordRepeat(value) {\n        if (studentPassword === value) {\n            setIsPasswordChecked(true)\n            setPasswordMessage(\"你的密码很棒👍\")\n        } else {\n            setIsPasswordChecked(false)\n            setPasswordMessage(\"两次密码不相同❌\")\n        }\n    }\n    return (\n        <div className=\"register-container\">\n            {isAfterRegister && <div className=\"register-panel\">{registerMessage}</div>}\n            <div className=\"register-form-box\">\n                <div className=\"register-form-input-box\">\n                    <div className=\"register-form-text\">学生卡号(账号)</div>\n                    <input type=\"number\" autoFocus\n                        placeholder=\"请输入你的卡号\"\n                        className=\"register-form-input\"\n                        onChange={event => {\n                            setStudentId(event.target.value)\n                        }}\n                        onBlur={event => {\n                            checkStudentId()\n                            setIsIdMessageShow(true)\n                        }} />\n                    {isIdMessageShow && <div\n                        className={isIdChecked ?\n                            \"register-id-message-checked\" : \"register-id-message\"}>\n                        {idMessage}</div>}\n                </div>\n                <div className=\"register-form-input-box\">\n                    <div className=\"register-form-text\">姓名</div>\n                    <input type=\"text\"\n                        placeholder=\"请输入你的姓名\"\n                        className=\"register-form-input\"\n                        onChange={event => {\n                            setStudentName(event.target.value)\n                        }} />\n                </div>\n                <div className=\"register-form-input-box\">\n                    <div className=\"register-form-text\">密码</div>\n                    <input type=\"password\"\n                        placeholder=\"请输入你的密码\"\n                        className=\"register-form-input\"\n                        onChange={event => {\n                            setStudentPassword(event.target.value)\n                            checkPassword(event.target.value)\n                        }}\n                    />\n\n                </div>\n                <div className=\"register-form-input-box\">\n                    <div className=\"register-form-text\">请再次输入密码</div>\n                    <input type=\"password\"\n                        placeholder=\"请输入你的密码\"\n                        className=\"register-form-input\"\n                        onChange={event => {\n                            setStudentPasswordRepeat(event.target.value)\n                            checkPasswordRepeat(event.target.value)\n                            setIsPasswordMessageShow(true)\n                        }} />\n                    {isPasswordMessageShow && <div\n                        className={isPasswordChecked ?\n                            \"register-id-message-checked\" : \"register-id-message\"}>\n                        {passwordMessage}\n                    </div>}\n                </div>\n                <div className={`register-form-button ${studentPassword.length && studentId.length ? \"register-form-button-allow\" : \"register-form-button-not-allow\"}`}\n                    onClick={() => {\n                        isIdChecked && isPasswordChecked && handleRegister()\n                    }}>{isIdChecked && isPasswordChecked ? \"确认注册\" : \"请先输入\"}</div>\n            </div>\n        </div>\n    );\n}\n\nexport default Register;\n","import React, { Component, useState } from 'react';\nimport './Login.scss'\n\nfunction Login() {\n    const [studentId, setStudentId] = useState('')\n    const [studentPassword, setStudentPassword] = useState('')\n    const [isAfterLogin, setIsAfterLogin] = useState(false)\n    const [loginMessage, setLoginMessage] = useState('')\n    async function handleLogin() {\n        const form = {\n            student_id: studentId,\n            password: studentPassword,\n        }\n        const data = React.$qs.stringify(form)\n        const res = await React.$http.post(\"/user/login\", data)\n        setIsAfterLogin(true)\n        console.log(\"res.data\", res.data);\n        if (res.data.code === 1) {\n            setLoginMessage(res.data.message + \"，即将跳转主页\")\n            setTimeout(() => {\n                window.location = \"/\"\n                // setIsAfterLogin(false)\n                localStorage.setItem('token', res.data.token)\n            }, 3000)\n        } else {\n            setLoginMessage(res.data.message + \"，请重新登陆\")\n            setTimeout(() => {\n                setIsAfterLogin(false)\n            }, 3000)\n        }\n    }\n\n    return (\n        <div className=\"login-container\">\n            {isAfterLogin && <div className=\"register-panel\">{loginMessage}</div>}\n            <div className=\"login-form-box\">\n                <div className=\"login-form-input-box\">\n                    <div className=\"login-form-text\">学号(账号)</div>\n                    <input type=\"number\" autoFocus\n                        placeholder=\"请输入你的卡号\"\n                        className=\"login-form-input\"\n                        onChange={event => {\n                            setStudentId(event.target.value)\n                        }}\n                    />\n\n                </div>\n\n                <div className=\"login-form-input-box\">\n                    <div className=\"login-form-text\">密码</div>\n                    <input type=\"password\"\n                        placeholder=\"请输入你的密码\"\n                        className=\"login-form-input\"\n                        onChange={event => {\n                            setStudentPassword(event.target.value)\n                        }}\n                    />\n                </div>\n                <div className={`login-form-button ${studentPassword.length && studentId.length ? \"login-form-button-allow\" : \"login-form-button-not-allow\"}`}\n                    onClick={() => {\n                        studentPassword.length && studentId.length && handleLogin()\n                    }}>{studentPassword.length && studentId.length ? \"登陆\" : \"请先输入完成\"}</div>\n            </div>\n        </div>\n    );\n}\n\nexport default Login;\n","export default __webpack_public_path__ + \"static/media/logo.dd8edf28.jpeg\";","import React, { Component, useState, useEffect } from 'react';\nimport LOGO from './images/logo.jpeg';\nimport './NavBar.scss';\n\nfunction NavBar(props) {\n    const {\n        openTools,\n        isPositionMode,\n        setIsPositionMode,\n        setOpenTools,\n        myMarkerPosition,\n        isGamMode,\n        setIsGamMode,\n        setNearbyUserList,\n        nearbyUserList,\n        setUserPosition,\n        studentId,\n        setStudentId,\n        studentName,\n        setStudentName,\n        signature,\n        userPosition,\n        setSignature,\n        myMapObj,\n    }\n        = props\n    const isMap = window.location.pathname === \"/\"\n    const [isPhone, setIsPhone] = useState(false)\n    const [isLogin, setIsLogin] = useState(false)\n    const [isMore, setIsMore] = useState(false)\n    const [isPanelShow, setIsPanelShow] = useState(false)\n    const [panelMessage, setPanelMessage] = useState(\"\")\n    const [isMessageBoxShow, setIsMessageBoxShow] = useState(false)\n    const [myMessageList, setMyMessageList] = useState([])\n\n    async function getMyMessage() {\n        const res = await React.$http.get(\"/message/mymessage\")\n        console.log(\"message\", res);\n        const messageList = res.data.message_list && res.data.message_list.reverse()\n        setMyMessageList(messageList)\n    }\n    function getToken() {\n        React.$http.get('/token')\n            .then(res => {\n                console.log(res);\n                console.log(\"isLogin\", isLogin);\n                if (res.data.with_token && !isLogin) {\n                    setIsLogin(true);\n                    setStudentId(res.data.student_id)\n                    setStudentName(res.data.student_name)\n                    setSignature(res.data.signature)\n                    if (res.data.longitude !== 0 && res.data.latitude !== 0) {\n                        const lng = res.data.longitude\n                        const lat = res.data.latitude\n                        setUserPosition([lng, lat])\n                    }\n                } else if (isLogin) {\n                    setIsLogin(false);\n                    setStudentId(\"\")\n                    setStudentName(\"\")\n                    const pathname = window.location.pathname\n                    const isRedirect = pathname === \"/position\" || pathname === \"/message\"\n                    if (isRedirect) window.location = \"/\"\n                } else {\n                    const pathname = window.location.pathname\n                    const isRedirect = pathname === \"/position\" || pathname === \"/message\"\n                    console.log(\"isRedirect\", isRedirect);\n                    if (isRedirect) window.location = \"/\"\n                }\n            })\n    }\n    async function getPosition() {\n        console.log('heregetPosition');\n        \n        const res = await React.$http.get(\"/user/position\")\n        console.log(\"position-res\", res);\n        if (res.data.code === -2) {\n            setIsPanelShow(true)\n            setPanelMessage(res.data.message)\n            setTimeout(() => {\n                setIsGamMode(false)\n                setIsPositionMode(true)\n                window.location = \"/position\"\n            }, 2000)\n        }\n        setIsPanelShow(true)\n        setPanelMessage(\"已经为你匹配附近的校友,快给他们留言吧!\")\n        setIsMessageBoxShow(true)\n        getMyMessage()\n        setUserPosition([res.data.user_lng, res.data.user_lat])\n        setNearbyUserList(res.data.user_list);\n        setTimeout(() => {\n            setIsPanelShow(false)\n        }, 2000)\n\n    }\n    useEffect(() => {\n        const pathname = window.location.pathname\n        if (pathname === \"/position\") {\n            setIsPositionMode(true)\n            setOpenTools(false)\n            setNearbyUserList([])\n            setIsMessageBoxShow(false)\n        } else if (pathname === \"/gam\") {\n            setIsGamMode(true)\n            setOpenTools(false)\n            getPosition()\n            getMyMessage()\n        }\n        getToken()\n        if (document.body.clientWidth < 1000) {\n            setIsPhone(true)\n        }\n    }, [])\n    const handleLogout = () => {\n        localStorage.removeItem(\"token\")\n        getToken()\n    }\n    const handleChangePosition = async () => {\n        console.log(myMarkerPosition);\n        const flag = myMarkerPosition[0] === 0 && myMarkerPosition[1] === 0\n        const res = await React.$http.get('/user/update/info', {\n            params: {\n                longitude: flag ? userPosition[0] : myMarkerPosition[0],\n                latitude: flag ? userPosition[1] : myMarkerPosition[1],\n                signature: signature,\n            }\n        })\n        console.log(res)\n        setIsPanelShow(true)\n        setTimeout(() => {\n            setIsPanelShow(false)\n        }, 2000)\n        if (res.data.code === 1) {\n            setPanelMessage(res.data.message + \",即将跳转社交模式,快跟附近的校友聊天吧！\")\n            setTimeout(() => {\n                window.location = \"/gam\"\n                setIsMessageBoxShow(true)\n                getMyMessage()\n            }, 2000)\n        } else {\n            setPanelMessage(res.data.message + \"，请重试\")\n        }\n\n    }\n    window.addEventListener('resize', event => {\n        if (document.body.clientWidth < 1000 && !isPhone) {\n            setIsPhone(true)\n        }\n        if (document.body.clientWidth > 1000 && isPhone) {\n            setIsPhone(false)\n        }\n    })\n\n    const getFriendInfo = async (friend_id) => {\n        let flag = false\n        nearbyUserList.map(item => {\n            if (item.student_id === friend_id) {\n                const lng = item.longitude\n                const lat = item.latitude\n                myMapObj.setCenter([lng, lat])\n                myMapObj.setZoom(18)\n                myMapObj.setPitch(60)\n                flag = true\n                return\n            }\n        })\n        if (flag) return\n        const res = await React.$http.get(\"/user/posinfo\", {\n            params: {\n                position: userPosition.join(\";\"),\n                student_id: friend_id\n            }\n        })\n        console.log(res);\n        res.data.userinfo.setFocus = true\n        const newList = [...nearbyUserList, res.data.userinfo]\n        setNearbyUserList(newList)\n    }\n    return (\n        <div className=\"nav-container\" >\n            {isMessageBoxShow && <div className=\"nav-chat-message-box\">\n                <div className=\"nav-chat-message-title\">{myMessageList ? \"消息列表\" : \"还没有消息\"}</div>\n                {myMessageList && myMessageList.map((item, index) => {\n                    return <div className=\"nav-chat-message-container\" key={item.SendTime}>\n                        <div className=\"nav-chat-list-name\" onClick={() => {\n                            getFriendInfo(item.SenderId)\n                        }}>\n                            <span className=\"nav-chat-list-username\">{item.SenderName}</span>\n                            给你留言:</div>\n                        <div className=\"nav-chat-list-message\">{item.Message}</div>\n                        <div className=\"nav-chat-list-time\">{item.SendTime}</div>\n\n                    </div>\n                })}\n            </div>}\n            {isPanelShow && <div className=\"nav-panel\">{panelMessage}</div>}\n            <img src={LOGO} className=\"nav-logo\" style={{marginLeft:isPhone?5:40}} onClick={() => {\n                window.open(\"https://www.cug.edu.cn/\", '_blank')\n            }} />\n            {!(isPhone && isLogin) && <div className=\"nav-main-text\">地大地图</div>}\n            {isLogin && studentName !== \"\" &&\n                <div className=\"nav-welcome\" style={{marginLeft:isPhone?5:40}}>\n                    <div className=\"nav-username\"><span style={{ color: \"red\", fontSize: 20, margin: 0 }}>欢迎回来</span>{studentName}</div>\n                    <div className={\"nav-user-signature\"} onClick={() => {\n                        if (signature === \"\") window.location = \"/position\"\n                    }}>{signature === \"\" ? \"你还没有个性签名喔，快去更新一下吧！\" : signature}</div>\n                </div>\n            }\n            {\n                !isMap && (\n                    <>\n                        {isPhone ? (\n                            <div className=\"nav-right-phone\">\n                                <div className=\"nav-right-phone-barbox\"\n                                    onClick={() => {\n                                        setIsMore(!isMore)\n                                    }}>\n                                    <div className=\"nav-right-phone-line\"></div>\n                                    <div className=\"nav-right-phone-line\"></div>\n                                    <div className=\"nav-right-phone-line\"></div>\n                                </div>\n                                {isMore && (\n                                    <div className=\"nav-right-phone-more-pannel\">\n                                        <div className=\"nav-right-phone-more-pannel-line\"\n                                            onClick={() => {\n                                                window.location = \"/\"\n                                                setIsMore(false)\n                                            }}>回到地图</div>\n                                        {isPositionMode && <div className=\"nav-right-phone-more-pannel-line\"\n                                            onClick={() => {\n                                                handleChangePosition()\n                                                setIsMore(false)\n                                            }}>保存我的信息\n                                        </div>}\n                                        {/* <div className=\"nav-right-phone-more-pannel-line\"></div> */}\n                                        <div className=\"nav-right-phone-more-pannel-line\"></div>\n                                    </div>\n                                )}\n                            </div>\n\n                        ) : (\n                                <div className=\"nav-right-goback\">\n                                    <div className=\"nav-right-button\" onClick={() => {\n                                        window.location = \"/\"\n                                    }}>回到地图\n                                </div>\n                                    {isPositionMode && <div className=\"nav-right-button\" onClick={() => {\n                                        handleChangePosition()\n                                    }}>保存我的信息\n                                </div>}\n                                </div>\n                            )}\n                    </>\n                )\n            }\n            {\n                isMap && <>\n                    {isPhone ? (\n                        <div className=\"nav-right-phone\">\n                            <div className=\"nav-right-phone-barbox\"\n                                onClick={() => {\n                                    setIsMore(!isMore)\n                                }}>\n                                <div className=\"nav-right-phone-line\"></div>\n                                <div className=\"nav-right-phone-line\"></div>\n                                <div className=\"nav-right-phone-line\"></div>\n                            </div>\n                            {isMore && (\n                                <div className=\"nav-right-phone-more-pannel\">\n                                    <div className=\"nav-right-phone-more-pannel-line\"\n                                        onClick={() => {\n                                            setIsMore(false)\n                                            if (isLogin) {\n                                                if (userPosition[0] !== 0 && userPosition[0] !== 0) {\n                                                    window.location = \"/gam\"\n\n                                                    setIsGamMode(true)\n                                                } else {\n                                                    setIsPanelShow(true)\n                                                    setPanelMessage(\"你需要先补充位置信息，才能开始社交喔！\")\n                                                    setTimeout(() => {\n                                                        window.location = \"/position\"\n                                                    }, 2000)\n                                                }\n                                            } else {\n                                                window.location = \"/register\"\n                                            }\n                                        }}>{isLogin ? '我的社交' : '注册'}</div>\n                                    <div className=\"nav-right-phone-more-pannel-line\"\n                                        onClick={() => {\n                                            setIsMore(false)\n                                            if (isLogin) {\n                                                window.location = \"/position\"\n                                                setIsPositionMode(true)\n                                            } else {\n                                                window.location = \"/login\"\n                                            }\n                                        }}\n                                    >{isLogin ? '修改我的信息' : '登陆'}</div>\n\n                                    <div className=\"nav-right-phone-more-pannel-line\"\n                                        onClick={() => {\n                                            setIsMore(false)\n                                            setOpenTools(!openTools)\n                                        }}> {openTools ? \"关闭\" : \"打开\"}工具栏</div>\n                                    {<div className=\"nav-right-phone-more-pannel-line\"\n                                        onClick={() => {\n                                            setIsMore(false)\n                                            handleLogout()\n                                        }}> {isLogin ? \"退出登陆\" : \"尽情期待\"}</div>}\n                                </div>\n                            )}\n                        </div>\n                    ) : (\n                            <div className=\"nav-right\">\n                                <div className=\"nav-right-button\" onClick={() => {\n                                    if (isLogin) {\n                                        if (userPosition[0] !== 0 && userPosition[0] !== 0) {\n                                            window.location = \"/gam\"\n                                            setIsGamMode(true)\n                                        } else {\n                                            window.location = \"/position\"\n                                        }\n                                    } else {\n                                        window.location = \"/register\"\n                                    }\n                                }}>{isLogin ? '我的社交' : '注册'}</div>\n                                <div className=\"nav-right-button\"\n                                    onClick={() => {\n                                        if (isLogin) {\n                                            window.location = \"/position\"\n                                            setIsPositionMode(true)\n\n                                        } else {\n                                            window.location = \"/login\"\n                                        }\n                                    }}\n                                >{isLogin ? '修改信息' : '登陆'}</div>\n                                <div className=\"nav-right-button\" onClick={() => {\n                                    setOpenTools(!openTools)\n                                }}> {openTools ? \"关闭\" : \"打开\"}工具栏</div>\n                                {isLogin && <div className=\"nav-right-button\" onClick={() => {\n                                    handleLogout()\n                                }}> 退出登陆</div>}\n                            </div>\n                        )\n                    }\n                </>\n            }\n        </div >\n    );\n}\n\nexport default NavBar;\n","import React, { Component } from 'react';\nimport './Footer.scss'\n\nclass Footer extends Component {\n    render() {\n        return (\n            <div className=\"footer-container\">\n                <div className=\"footer-main-text\">\n                    footer\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Footer;\n","import React, { Component, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport Map from './Map/Map';\nimport Register from './Register/Register';\nimport Login from './Login/Login';\nimport NavBar from './NavBar/NavBar';\nimport Footer from './Footer/Footer';\nimport { BrowserRouter as Router, Route, Switch, Link, NavLink } from 'react-router-dom';\n\n\nfunction router() {\n    const [openTools, setOpenTools] = useState(true)\n    const [isPositionMode, setIsPositionMode] = useState(false)\n    const [isGamMode, setIsGamMode] = useState(false)\n    const [myMarkerPosition, setMyMarkerPosition] = useState([0, 0])\n    const [nearbyUserList, setNearbyUserList] = useState([])\n    const [userPosition, setUserPosition] = useState([0,0])\n    const [studentId, setStudentId] = useState(\"\")\n    const [studentName, setStudentName] = useState(\"\")\n    const [signature, setSignature] = useState(\"\")\n    const [myMapObj, setMyMapObj] = useState(null)\n\n\n    return (\n        <Router>\n            <div style={{ width: \"100%\", height: 80 }} />\n            <NavBar\n                openTools={openTools}\n                setOpenTools={setOpenTools}\n                isPositionMode={isPositionMode}\n                isGamMode={isGamMode}\n                setIsPositionMode={setIsPositionMode}\n                setIsGamMode={setIsGamMode}\n                myMarkerPosition={myMarkerPosition}\n                setUserPosition={setUserPosition}\n                studentId={studentId}\n                setStudentId={setStudentId}\n                studentName={studentName}\n                setStudentName={setStudentName}\n                signature={signature}\n                setSignature={setSignature}\n                userPosition={userPosition}\n                setNearbyUserList={setNearbyUserList}\n                nearbyUserList={nearbyUserList}\n                myMapObj={myMapObj}\n            />\n            {/* <NavLink to=\"/login\">登陆</NavLink> */}\n            <Switch>\n                <Route path='/register' component={Register} />\n                <Route path='/login' component={Login} />\n                {/* <Route path='/app' component={SideBar} /> */}\n                <Route path='/' render={() =>\n                    <Map\n                        openTools={openTools}\n                        setOpenTools={setOpenTools}\n                        isPositionMode={isPositionMode}\n                        isGamMode={isGamMode}\n                        setIsGamMode={setIsGamMode}\n                        setIsPositionMode={setIsPositionMode}\n                        myMarkerPosition={myMarkerPosition}\n                        setMyMarkerPosition={setMyMarkerPosition}\n                        nearbyUserList={nearbyUserList}\n                        userPosition={userPosition}\n                        studentId={studentId}\n                        studentName={studentName}\n                        setSignature={setSignature}\n                        signature={signature}\n                        myMapObj={myMapObj}\n                        setMyMapObj={setMyMapObj}\n                    />} />\n            </Switch>\n            <Footer />\n        </Router>\n    );\n}\n\nexport default router;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Router from './router.jsx';\nimport './index.css'\nimport axios from 'axios';\nimport qs from 'qs';\nReact.$http = axios\nReact.$qs = qs\naxios.defaults.baseURL = 'http://120.77.144.37:9999';\naxios.interceptors.request.use(\n  config => {\n    if (localStorage.getItem('token')) { //判断token是否存在\n      config.headers.Authorization = \"Token \" + localStorage.token;  //将token设置成请求头\n    }\n    return config;\n  },\n);\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\nReactDOM.render(\n  <Router />, document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}